<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Generate Link</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1 class="justify-content-center align-items-center text-center">
      Generate Invitation Link
    </h1>
    <div class="row-6 d-block mx-auto text-center mt-5" style="width: 300px">
      <form
        method="POST"
        id="my-form"
        action="https://script.google.com/macros/s/AKfycbz0QT2ZZqqt5eIw7t4SbPtVA2OYQrRn65DdhGSlq2c7VpgL_vaAZwHVypAq13J5yNWN6g/exec"
      >
        <div class="col mb-3">
          <label for="Email" class="form-label">Email address</label>
          <input type="email" class="form-control" id="Email" name="Email" />
        </div>
        <div class="col mb-3">
          <label for="Name" class="form-label">Nama</label>
          <input
            type="text"
            class="form-control"
            id="Name"
            name="Name"
            required
          />
        </div>
        <div class="col mb-3">
          <label for="Url" class="form-label">Url</label>
          <input
            type="text"
            class="form-control"
            id="Url"
            name="Url"
            readonly
          />
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>

    <script>
      window.addEventListener("load", function () {
        const form = document.getElementById("my-form");
        form.addEventListener("submit", function (e) {
          e.preventDefault();
          const data = new FormData(form);
          const action = e.target.action;
          fetch(action, {
            method: "POST",
            body: data,
          }).then(() => {
            alert("Success!");
          });
        });
      });
    </script>

    <script>
      window.onload = function () {
        const nama = document.getElementById("Name");
        const url = document.getElementById("Url");

        nama.addEventListener("input", function () {
          const namaInput = nama.value;
          url.value =
            "https://bagus-kesya-wedding.vercel.app/?nama=" +
            encodeURIComponent(namaInput);
        });
      };
    </script>
  </body>
</html>
